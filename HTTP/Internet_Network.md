# 1. 인터넷 네트워크

- 두 개의 컴퓨터는 클라이언트와 서버 사이에 ‘인터넷 망’으로 통신한다.
- ## IP(인터넷 프로토콜) - 클라이언트는 지정한 IP 주소에 데이터를 전달
    - 패킷(Packet) 이라는 통신 단위로 전달한다. (패키지 + 버킷)
    - IP 패킷은 ‘출발지 IP’ , ‘도착지 IP’, 기타 등등…과 그 안에 전송 데이터로 구성
    - 그 패킷은 복잡한 인터넷 망(수많은 노드들)을 거쳐 도착 서버로 전달되고
    잘 도착하면 서버는 메시지를 잘 받았다는 패킷을 클라이언트로 던진다(응답)
    - ### IP 프로토콜 한계
        - 비연결성 : 패킷 받을 대상이 없거나 서비스 불능 상태여도 패킷이 전송됨
        ex)PC가 꺼져있어도. 
        클라이언트는 대상 서버가 패킷을 받을 수 있는 상태인지 모른다.
        - 비신뢰성 : 중간에 패킷이 사라지게 되면? (패킷소실 발생) - 중간에 서버 문제 ⇒ 패킷소실
                         여러개 던졌을 때 패킷이 순서대로 오지 않는다면? (순서 장담X)
        - 여러 프로그램의 구분 : 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이라면..?  ex) 게임하면서 + 인터넷하면서 + 노래듣는
    
- ## 위의 문제를 해결해주는 게 TCP이다 (feat. UDP)
    - IP 스택 4계층
    
    | 애플리케이션       | 애플리케이션 계층 - HTTP, FTP | SOCKET 라이브러리 |
    | OS                 | 전송 계층 - TCP, UDP         | X |
    | OS                 | 인터넷 계층 - IP             | X |
    | 네트워크 인터페이스| 네트워크 인터페이스 계층      | LAN 드라이버 |
    
    프로그램 메시지 생성 → SOCKET 라이브러리 전달 → TCP정보 생성(메시지 데이터 포함) → IP 패킷 생성(TCP데이터 포함) → LAN카드 → 인터넷 → 서버
    
    IP 패킷 안에 - TCP 세그먼트 안에 - 전송 데이터가 있다
    
    - ## TCP - 전송 제어 프로토콜 (Transmission Conrtrol Protocol) (≒신뢰할 수 있는 프로토콜)
        - 연결지향 - TCP 3 way handshake (가상 연결임, 물리적연결X) - 그냥 3개가 왔다갔다 하며 논리적 연결이 되었다는 의미. 중간에 많은 서버가 있는지 관심X
        1. SYN ,   2. SYN + ACK ,   3. ACK,    4. 데이터 전송
        1, 2, 3 → 클라이언트와 서버가 서로를 믿을 수 있는거 - 논리적 연결임
        SYN : 접속 요청,     ACK : 요청 수락
        - 데이터 전달 보증
        1. 클라이언트의 데이터 전송          2. 데이터 잘 받았다는 서버의 응답
        - 순서 보장
        클라이언트는 패킷 1, 2, 3 순으로 보냈다고 가정
        서버로 패킷 1, 3, 2 순으로 도착했다면?  → 패킷 2부터 다시 보내라고 요청
        - 현재 대부분 TCP 사용
    
    - ## UDP : 사용자 데이터그램 프로토콜(User Datagram Protocol)
        - 기능 거의 X
        - 연결 지향, 데이터 전달 보증, 순서 보장 X
        - 데이터 전달 - 순서 보장이 되지 않지만 심플하고 빠름
        - IP와 거의 같지만 PORT와 Checksum추가
        PORT : 하나의 IP에서 여러 애플리케이션이 동작할 때 어떤 패킷인지 구분해주는
        Checksum: 메시지가 맞는지 검증하는
        
        애플리케이션 추가 작업 필요 : TCP-3way는 시간 많고 최적화X ⇒ 손 대지 못함. 이를 UDP를 사용해 손을 댄다.
        
- ## PORT : 위에서 언급한 TCP 세그먼트 안에 ‘출발지 PORT’, ‘목적지 PORT’, 전송 제어, 순서, 검증 정보 등 있다.
IP 패킷(그 안에 TCP) 안에 있는 출발지 IP가 아닌 출발지 **PORT**
    - 같은 IP 내에서 프로세스를 구분함 → 마치 몇동 몇호 인지
    - 0 ~ 65535 할당 가능 하고 0 ~ 1023은 잘 알려진 포트이기에 사용하지 않는 것이 좋음
    ex) HTTP - 80,  HTTPS - 443 이다

- ## DNS (Domain Name System)
    - IP는 길고 기억하기 어려움 100.100.100.???
    - IP는 변경될 수 있음(과거 IP → 신규 IP)
    - 이때 필요한게 DNS이다 → 도메인 명을 IP 주소로 변환시키는 것
    - 도메인 명에 IP 주소를 서버에 등록하고 클라이언트가 도메인 명을 치면 정해진 IP 주소로 접속 되는 것
